<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Mrhao"><title>Bilibili抽奖启动脚本 · Mrhao Blog</title><meta name="description" content="直接上菜考完试，开始找点东西玩。早在一年前我一个当UP主的朋友想要给粉丝们抽奖，拜托我帮忙找找软件。我哪抽过啥奖啊，接着一顿github搜索找到了项目Magician-T/bilibili_lottery,这是一个python写的抽奖脚本由Magician-T编写，clone下来根据文档弄了下，感觉"><meta name="keywords" content="[&quot;MrhaoBlog&quot;,&quot;Mr.hao&quot;,&quot;Windows&quot;,&quot;Linux&quot;,&quot;html&quot;,&quot;Web&quot;,&quot;Mrhao博客&quot;]"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><script src="https://www.googletagmanager.com/gtag/js?id=UA-164546111-1"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-164546111-1');</script><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/blog/css/style.css"><link rel="stylesheet" href="/blog/css/blog_basic.css"><link rel="stylesheet" href="/blog/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="https://q.qlogo.cn/headimg_dl?dst_uin=2859676251&amp;spec=640" style="width:127px;border-radius: 100%;"><h3 title><a href="/">Mrhao Blog</a></h3><div class="description"><p>Mrhao'Blog鸽子在校博主的技术型博客</p></div></div></div><ul class="social-links"><li><a href="http://github.com/JHPatchouli"><i class="fa fa-github"></i></a></li></ul><div class="footer"><div class="by_blog"><span>Blog by</span><a href="https://github.com/JHPatchouli"> Mrhao</a><br><span>Theme modfiy by</span><a href="https://github.com/JHPatchouli"> JHPatchouli</a><br><span>Theme by </span></div><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">本站由hexo驱动&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/blog">首页</a></li><li><a href="/blog/about">关于</a></li><li><a href="/blog/archives">归档</a></li><li><a href="/blog/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="https://q.qlogo.cn/headimg_dl?dst_uin=2859676251&amp;spec=640"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Bilibili抽奖启动脚本</a></h3></div><div class="post-content"><h5 id="直接上菜"><a href="#直接上菜" class="headerlink" title="直接上菜"></a>直接上菜</h5><h4 id="考完试，开始找点东西玩。早在一年前我一个当UP主的朋友想要给粉丝们抽奖，拜托我帮忙找找软件。我哪抽过啥奖啊，接着一顿github搜索找到了项目Magician-T-bilibili-lottery-这是一个python写的抽奖脚本由Magician-T编写，clone下来根据文档弄了下，感觉可以满足需求了。结果给朋友后，骂骂咧咧的说那个python的依赖很是烦。我想了想，啥我都只懂点，用bat写个启动脚本呗。脚本大概步骤是–自动安装依赖–选择模式–输入av号–检查av号–输入upid–检查upid–输入cookie–写入配置–启动python脚本。然后那朋友用了一回行了，我直接丢github然后就不管了。"><a href="#考完试，开始找点东西玩。早在一年前我一个当UP主的朋友想要给粉丝们抽奖，拜托我帮忙找找软件。我哪抽过啥奖啊，接着一顿github搜索找到了项目Magician-T-bilibili-lottery-这是一个python写的抽奖脚本由Magician-T编写，clone下来根据文档弄了下，感觉可以满足需求了。结果给朋友后，骂骂咧咧的说那个python的依赖很是烦。我想了想，啥我都只懂点，用bat写个启动脚本呗。脚本大概步骤是–自动安装依赖–选择模式–输入av号–检查av号–输入upid–检查upid–输入cookie–写入配置–启动python脚本。然后那朋友用了一回行了，我直接丢github然后就不管了。" class="headerlink" title="考完试，开始找点东西玩。早在一年前我一个当UP主的朋友想要给粉丝们抽奖，拜托我帮忙找找软件。我哪抽过啥奖啊，接着一顿github搜索找到了项目Magician-T/bilibili_lottery,这是一个python写的抽奖脚本由Magician-T编写，clone下来根据文档弄了下，感觉可以满足需求了。结果给朋友后，骂骂咧咧的说那个python的依赖很是烦。我想了想，啥我都只懂点，用bat写个启动脚本呗。脚本大概步骤是–自动安装依赖–选择模式–输入av号–检查av号–输入upid–检查upid–输入cookie–写入配置–启动python脚本。然后那朋友用了一回行了，我直接丢github然后就不管了。"></a>考完试，开始找点东西玩。早在一年前我一个当UP主的朋友想要给粉丝们抽奖，拜托我帮忙找找软件。我哪抽过啥奖啊，接着一顿github搜索找到了项目<a href="https://github.com/Magician-T/" target="_blank" rel="noopener">Magician-T/bilibili_lottery</a>,这是一个<code>python</code>写的抽奖脚本由<code>Magician-T</code>编写，clone下来根据文档弄了下，感觉可以满足需求了。结果给朋友后，骂骂咧咧的说那个<code>python</code>的依赖很是烦。我想了想，啥我都只懂点，用bat写个启动脚本呗。脚本大概步骤是–自动安装依赖–选择模式–输入av号–检查av号–输入upid–检查upid–输入cookie–写入配置–启动python脚本。然后那朋友用了一回行了，我直接丢github然后就不管了。</h4><h5 id="一年多后"><a href="#一年多后" class="headerlink" title="一年多后"></a>一年多后</h5><h4 id="我以为这就完了，结果考试当天刚刚考完我的项目JHPatchouli-bilibili-lottery出现了一个Issues并发到我的邮箱，我见到后发现是有人提交一个奇怪的报错，大致的内容是它的powershell看起来没有解析bat里的内容，他换了cmd也一样。我把项目pull下来看了下，即使安装了和问题出现者一样的版本的环境还是无法复现问题，依旧是正常运行，在测试中我发现我这个项目实在是太老了，我当即就打算重制，写了两天代码，其中加入了BV号转av号功能和选择依赖下载源的功能，并封装成了便携版本。其间我遇到的各种奇葩的问题-因为我的无知"><a href="#我以为这就完了，结果考试当天刚刚考完我的项目JHPatchouli-bilibili-lottery出现了一个Issues并发到我的邮箱，我见到后发现是有人提交一个奇怪的报错，大致的内容是它的powershell看起来没有解析bat里的内容，他换了cmd也一样。我把项目pull下来看了下，即使安装了和问题出现者一样的版本的环境还是无法复现问题，依旧是正常运行，在测试中我发现我这个项目实在是太老了，我当即就打算重制，写了两天代码，其中加入了BV号转av号功能和选择依赖下载源的功能，并封装成了便携版本。其间我遇到的各种奇葩的问题-因为我的无知" class="headerlink" title="我以为这就完了，结果考试当天刚刚考完我的项目JHPatchouli/bilibili_lottery出现了一个Issues并发到我的邮箱，我见到后发现是有人提交一个奇怪的报错，大致的内容是它的powershell看起来没有解析bat里的内容，他换了cmd也一样。我把项目pull下来看了下，即使安装了和问题出现者一样的版本的环境还是无法复现问题，依旧是正常运行，在测试中我发现我这个项目实在是太老了，我当即就打算重制，写了两天代码，其中加入了BV号转av号功能和选择依赖下载源的功能，并封装成了便携版本。其间我遇到的各种奇葩的问题(因为我的无知)"></a>我以为这就完了，结果考试当天刚刚考完我的项目<a href="https://github.com/JHPatchouli/bilibili_lottery" target="_blank" rel="noopener">JHPatchouli/bilibili_lottery</a>出现了一个<code>Issues</code>并发到我的邮箱，我见到后发现是有人提交一个奇怪的报错，大致的内容是它的powershell看起来没有解析bat里的内容，他换了cmd也一样。我把项目<code>pull</code>下来看了下，即使安装了和问题出现者一样的版本的环境还是无法复现问题，依旧是正常运行，在测试中我发现我这个项目实在是太老了，我当即就打算重制，写了两天代码，其中加入了BV号转av号功能和选择依赖下载源的功能，并封装成了便携版本。其间我遇到的各种奇葩的问题(因为我的无知)</h4><h5 id="重头戏"><a href="#重头戏" class="headerlink" title="重头戏"></a>重头戏</h5><h4 id="我当时重制的思路是，做一个小api-不想用后端-，于是我用网上找到的转换bv号的js代码，写了个页面JHPatchouli-Bilibili-bvtoav当我在cmd用curl或wget发送get请求到它时，它返回来了页面代码，我突然想起来它是js，需要浏览器的js引擎去跑而curl和wget这些工具不能像浏览器一样渲染页面，所以获取不到值。接着我想着，在线不行，那就离线，我把我安装的nodejs的文件夹直接复制出来放在脚本目录下再修改一下js内容以便接收cmd传入的参数，接着"><a href="#我当时重制的思路是，做一个小api-不想用后端-，于是我用网上找到的转换bv号的js代码，写了个页面JHPatchouli-Bilibili-bvtoav当我在cmd用curl或wget发送get请求到它时，它返回来了页面代码，我突然想起来它是js，需要浏览器的js引擎去跑而curl和wget这些工具不能像浏览器一样渲染页面，所以获取不到值。接着我想着，在线不行，那就离线，我把我安装的nodejs的文件夹直接复制出来放在脚本目录下再修改一下js内容以便接收cmd传入的参数，接着" class="headerlink" title="我当时重制的思路是，做一个小api(不想用后端)，于是我用网上找到的转换bv号的js代码，写了个页面JHPatchouli/Bilibili_bvtoav当我在cmd用curl或wget发送get请求到它时，它返回来了页面代码，我突然想起来它是js，需要浏览器的js引擎去跑而curl和wget这些工具不能像浏览器一样渲染页面，所以获取不到值。接着我想着，在线不行，那就离线，我把我安装的nodejs的文件夹直接复制出来放在脚本目录下再修改一下js内容以便接收cmd传入的参数，接着"></a>我当时重制的思路是，做一个小api(不想用后端)，于是我用网上找到的转换bv号的js代码，写了个页面<a href="https://github.com/JHPatchouli/Bilibili_bvtoav" target="_blank" rel="noopener">JHPatchouli/Bilibili_bvtoav</a>当我在<code>cmd</code>用<code>curl</code>或<code>wget</code>发送<code>get</code>请求到它时，它返回来了页面代码，我突然想起来它是js，需要浏览器的<code>js</code>引擎去跑而<code>curl</code>和<code>wget</code>这些工具不能像浏览器一样渲染页面，所以获取不到值。接着我想着，在线不行，那就离线，我把我安装的<code>nodejs</code>的文件夹直接复制出来放在脚本目录下再修改一下js内容以便接收cmd传入的参数，接着</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; node.exe bvtoav.js bv号</span><br></pre></td></tr></table></figure>

<h4 id="出现了令人兴奋的av号，接着一切都还算顺利，另外附上成品，日后还将更新"><a href="#出现了令人兴奋的av号，接着一切都还算顺利，另外附上成品，日后还将更新" class="headerlink" title="出现了令人兴奋的av号，接着一切都还算顺利，另外附上成品，日后还将更新"></a>出现了令人兴奋的av号，接着一切都还算顺利，另外附上成品，日后还将更新</h4><blockquote>
<p><a href="https://github.com/JHPatchouli/bilibili_lottery/releases/tag/Bilibili_lotteryMod" target="_blank" rel="noopener">下载链接</a></p>
</blockquote>
<p><img src="https://i0.hdslb.com/bfs/album/24ae5957747daaef541716344e84e6323b70fc1e.png" alt="1"></p>
<p><img src="https://i0.hdslb.com/bfs/album/8296dcbd2116630a4f7bf66273c6124f839c1c2f.png" alt="2"></p>
<p><img src="https://www.hualigs.cn/image/60aaa0f5bf209.jpg" alt="3"></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-05-24</span><i class="fa fa-tag"></i><a class="tag" href="/blog/tags/Bilibili/" title="Bilibili">Bilibili </a><a class="tag" href="/blog/tags/bat/" title="bat">bat </a><a class="tag" href="/blog/tags/python/" title="python">python </a><a class="tag" href="/blog/tags/js-nodejs/" title="js - nodejs">js - nodejs </a><a class="tag" href="/blog/tags/修改/" title="修改">修改 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://git.mrhao.xyz/blog/2021/05/24/Bilibili抽奖脚本/,Mrhao Blog,Bilibili抽奖启动脚本,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/blog/2020/06/15/php防盗链时效下载/" title="PHP写个资源失效下载防盗链">下一篇</a></li></ul></div><div style="margin:0 30px;/* background-color: #cfcfcf6b; *//* box-shadow: 0px 0px 0px 0px black; *//* text-shadow: 0px 0px 0px #210000; *//* background-color: white; *//* text-shadow: 0 0 #00000038; */color: #000000ad;"><blockquote style="background-color: #c5c5c5;"><div class="vwrap"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="https://github.com/JHPatchouli" style="word-wrap:break-word;color: #3668b3c4;">Mrhao</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://git.mrhao.xyz/blog/2021/05/24/Bilibili抽奖脚本/" style="word-wrap:break-word;color: #3668b3c4;">https://git.mrhao.xyz/blog/2021/05/24/Bilibili抽奖脚本/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info"><br>本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="word-wrap:break-word;color: #3668b3c4;"> CC BY-NC-SA 4.0 </a>许可协议。转载请注明来自<a href="https://git.mrhao.xyz/blog" style="word-wrap:break-word;color: #3668b3c4;">Mrhao Blog</a></span></div></div></blockquote></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.7/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:false || false, 
  verify:true|| false, 
  app_id:'TlHtUet16iamRMk84dIJIGOg-gzGzoHsz',
  app_key:'3o7SE7LdAoTXJlrPx6gURmRx',
  placeholder:'说点什么吧。。',
  path: window.location.pathname,
  avatar:'hide'
})</script></div></div></div></div><script src="/blog/js/jquery.js"></script><script src="/blog/js/jquery-migrate-1.2.1.min.js"></script><script src="/blog/js/jquery.appear.js"></script></body></html>